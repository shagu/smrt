<meta charset="UTF-8" />

<style>
  body { background: #000; }
  #viewport { margin: auto; color: #fff; }
</style>

<div id="viewport">Loading...</div>

<script>
  let view = document.getElementById('viewport')
  let elements = {}

  /* spaghetti goes here - tastes like copy pasta */
  window.setInterval(function() {
    view.innerHTML = ""

    let request = new XMLHttpRequest()
    request.open('GET', "http://localhost:8044/json")
    request.responseType = 'json'
    request.send()

    request.onload = function() {
      const data = request.response

      /* show temperatures */
      for (entry in data["temperature"]) {
        console.log(data["temperature"][entry]["current"])
      }

      /* show devices */
      for (entry in data["device-tracker"]) {
        console.log(data["device-tracker"][entry]["mac"])
      }
    }
  }, 1000)
</script>